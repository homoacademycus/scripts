FROM centos:7
MAINTAINER homoacademycus

ARG appuser
ARG appgroup
ARG workingdir
ARG staticdir

RUN yum install -y epel-release
RUN yum install -y nginx
RUN systemctl enable nginx

RUN groupadd ${appgroup}
RUN useradd --groups ${appgroup} --create-home ${appuser} 
RUN gpasswd --restrict ${appgroup}

RUN chown -R ${appuser}:${appgroup} ${workingdir}
RUN chown -R ${appuser}:${appgroup} ${staticdir}
RUN chmod -R 770 ${workingdir}
RUN chmod -R 770 ${staticdir}

WORKDIR ${workingdir}

RUN passwd --lock root
USER ${appuser}

ENTRYPOINT ["/bin/bash"]
